<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
    <sitecore>
        <pipelines>
            <startAnalytics>
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.Analytics.LoadShoppingCart, ActiveCommerce.Training.CartPersistence" />
            </startAnalytics>
            <endAnalytics>
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.Analytics.PersistShoppingCart, ActiveCommerce.Training.CartPersistence"
                           patch:before="processor[1]"/>
            </endAnalytics>

            <acPersistCart>
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.PersistCart.CheckCartUpdated, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.PersistCart.CheckArgs, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.PersistCart.ReadFromCart, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.PersistCart.PersistToCookie, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.PersistCart.PersistToCustomer, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.PersistCart.CheckIfCartUpdateEventIsSet, ActiveCommerce.Training.CartPersistence" />
            </acPersistCart>
          
            <acRestoreCart>
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCart.CheckSessionInitialized, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCart.CheckArgs, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCart.ReadFromCookie, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCart.ReadFromCustomer, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCart.RestoreCouponCode, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCart.RestoreProducts, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCart.AddResultToSession, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCart.SetCartUpdatedEvent, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCart.SetSessionInitialized, ActiveCommerce.Training.CartPersistence" />
            </acRestoreCart>
          
            <acRestoreCartProduct>
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCartProduct.CheckArgs, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCartProduct.CheckProductInCart, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCartProduct.CheckProductAvailable, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCartProduct.CheckProductStock, ActiveCommerce.Training.CartPersistence" />
                <processor type="ActiveCommerce.Training.CartPersistence.Pipelines.RestoreCartProduct.AddProductToCart, ActiveCommerce.Training.CartPersistence" />
            </acRestoreCartProduct>
        </pipelines>

      <settings>
        <!-- Sets if the Cart Persistance is active or not.
             If Empty the default is False.-->
        <setting name="ActiveCommerce.Cart.Persistence.Active">
          <patch:attribute name="value">True</patch:attribute>
        </setting>
      </settings>
    </sitecore>
</configuration>